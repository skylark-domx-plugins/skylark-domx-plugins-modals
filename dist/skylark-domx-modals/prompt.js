/**
 * skylark-domx-modals - The skylark dom api extenstion library for color
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx/skylark-domx-modals/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx/query","./modals","./templates"],function(e,t,a,r){return a.prompt=function(){var n,o,i,c,l,p,s;if(c=t(r.form),o={className:"modals-prompt",buttons:createLabels("cancel","confirm"),value:"",inputType:"text"},p=void 0===(n=validateButtons(mergeArguments(o,arguments,["title","callback"]),["cancel","confirm"])).show||n.show,n.message=c,n.buttons.cancel.callback=n.onEscape=function(){return n.callback.call(this,null)},n.buttons.confirm.callback=function(){var e;switch(n.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":e=l.val();break;case"checkbox":var a=l.find("input:checked");e=[],each(a,function(a,r){e.push(t(r).val())})}return n.callback.call(this,e)},n.show=!1,!n.title)throw new Error("prompt requires a title");if(!e.isFunction(n.callback))throw new Error("prompt requires a callback");if(!r.inputs[n.inputType])throw new Error("invalid prompt type");switch(l=t(r.inputs[n.inputType]),n.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":l.val(n.value);break;case"select":var u={};if(s=n.inputOptions||[],!e.isArray(s))throw new Error("Please pass an array of input options");if(!s.length)throw new Error("prompt with select requires options");each(s,function(e,a){var r=l;if(void 0===a.value||void 0===a.text)throw new Error("given options in wrong format");a.group&&(u[a.group]||(u[a.group]=t("<optgroup/>").attr("label",a.group)),r=u[a.group]),r.append("<option value='"+a.value+"'>"+a.text+"</option>")}),each(u,function(e,t){l.append(t)}),l.val(n.value);break;case"checkbox":var h=e.isArray(n.value)?n.value:[n.value];if(!(s=n.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!s[0].value||!s[0].text)throw new Error("given options in wrong format");l=t("<div/>"),each(s,function(e,a){var o=t(r.inputs[n.inputType]);o.find("input").attr("value",a.value),o.find("label").append(a.text),each(h,function(e,t){t===a.value&&o.find("input").prop("checked",!0)}),l.append(o)})}return n.placeholder&&l.attr("placeholder",n.placeholder),n.pattern&&l.attr("pattern",n.pattern),n.maxlength&&l.attr("maxlength",n.maxlength),c.append(l),c.on("submit",function(e){e.preventDefault(),e.stopPropagation(),i.find(".btn-primary").click()}),(i=a.dialog(n)).off("shown.bs.modal"),i.on("shown.bs.modal",function(){l.focus()}),!0===p&&i.modal("show"),i}});
//# sourceMappingURL=sourcemaps/prompt.js.map
